!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).MiniVdom={})}(this,function(e){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=function(){function a(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length?arguments[2]:void 0,r=3<arguments.length?arguments[3]:void 0,o=4<arguments.length?arguments[4]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t.hook=t.hook||{},this.type=e,this.data=t,this.children=n,this.text=r,this.elm=o,this.key=t.key}var e,t,n;return e=a,n=[{key:"isVNode",value:function(e){return e instanceof a}},{key:"isSameVNode",value:function(e,t){return e.key===t.key&&e.type===t.type}}],(t=null)&&r(e.prototype,t),n&&r(e,n),a}();function t(e,t){var n=e.data.attrs,r=t.data.attrs,o=t.elm;if((n||r)&&n!==r){for(var a in n=n||{},r=r||{}){var i=r[a];i!==n[a]&&o.setAttribute(a,i+"")}for(var c in n)c in r||o.removeAttribute(c)}}var n={create:t,update:t};function a(e,t){var n=e.data.props,r=t.data.props,o=t.elm;if((n||r)&&n!==r){for(var a in r=r||{},n=n||{})r[a]||delete o[a];for(var i in r)r[i]!==n[i]&&(o[i]=r[i])}}var i={create:a,update:a};function c(e,t){var n=e.data.on,r=e.elm,o=t.data.on,a=t.elm;if(n!==o){if(n)for(var i in n)r.removeEventListener(i,n[i]);if(o)for(var c in o)a.addEventListener(c,o[c])}}var u={create:c,update:c,destroy:c},f=["create","insert","update","destroy","remove"],d=new y("");var s=function(e){var n,u={create:[],insert:[],update:[],destroy:[],remove:[]},t=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}(0<arguments.length&&void 0!==e?e:[]);try{for(t.s();!(n=t.n()).done;)!function(){var t=n.value;f.forEach(function(e){return t[e]&&u[e].push(t[e])})}()}catch(e){t.e(e)}finally{t.f()}function v(e,n,r,t,o){for(var a=3<arguments.length&&void 0!==t?t:0,i=4<arguments.length&&void 0!==o?o:r.length-1,c=function(){var t=r[a];e.insertBefore(function t(n){return"!"===n.type?n.elm=document.createComment(n.text):n.type?(n.elm=n.data.ns?document.createElementNS(n.data.ns,n.type):document.createElement(n.type),n.children&&n.children.forEach(function(e){n.elm.appendChild(t(e))}),n.text&&n.text.length&&n.elm.appendChild(document.createTextNode(n.text))):n.elm=document.createTextNode(n.text),u.create.forEach(function(e){return e(d,n)}),n.data.hook.create&&n.data.hook.create(),n.elm}(t),n),u.insert.forEach(function(e){return e(d,t)}),t.data.hook.insert&&t.data.hook.insert()};a<=i;a++)c()}function m(e,n,t,r){for(var o=2<arguments.length&&void 0!==t?t:0,a=3<arguments.length&&void 0!==r?r:n.length-1;o<=a;o++)!function(){var t=n[o];e&&e.removeChild(t.elm),u.destroy.forEach(function(e){return e(t,d)}),t.data.hook.destroy&&t.data.hook.destroy()}()}function p(t,n){var e=n.elm=t.elm,r=t.children,o=n.children;t!==n&&(void 0===n.text||n.text===t.text?(r&&o?r!==o&&function(e,t,n){for(var r,o=0,a=t[o],i=t.length-1,c=t[i],u=0,l=n[u],f=n.length-1,d=n[f];o<=i&&u<=f;)switch(!0){case!a:a=t[++o];break;case!c:c=t[--i];break;case!l:l=n[++u];break;case!d:d=t[--f];break;case y.isSameVNode(a,l):p(a,l),a=t[++o],l=n[++u];break;case y.isSameVNode(c,d):p(c,d),c=t[--i],d=n[--f];break;case y.isSameVNode(c,l):e.insertBefore(c.elm,e.childNodes[u]),p(c,l),c=t[--i],l=n[++u];break;case y.isSameVNode(a,d):e.insertBefore(c.elm,c.elm.nextSibling),p(a,d),a=t[++o],d=n[--f];break;default:var s,h=t.findIndex(function(e,t){return o<=t&&t<=i&&e&&y.isSameVNode(e,l)});~h?(s=t[h],t[h]=void 0,h!==u&&e.insertBefore(s.elm,e.childNodes[u]),p(s,l)):v(e,e.childNodes[u],[l]),l=n[++u]}i<o&&u<=f?v(e,null===(r=n[f+1])||void 0===r?void 0:r.elm,n.slice(u,f+1)):o<=i&&f<u&&m(e,t.slice(o,i+1).filter(function(e){return!!e}))}(e,r,o):o?(t.text&&(e.textContent=""),v(e,null,o)):r?(m(e,r),n.text&&(e.textContent=n.text)):t.text!==n.text&&(e.textContent=n.text),u.update.forEach(function(e){return e(t,n)}),n.data.hook.update&&n.data.hook.update()):e.textContent=n.text)}return function(t,n){var e;return y.isVNode(t)||(t=new y("",{},[],void 0,t)),y.isSameVNode(t,n)?p(t,n):(v((e=t.elm).parentNode,e,[n]),m(e.parentNode,[t]),u.insert.forEach(function(e){return e(t,n)})),n}}([n,i,u]);function v(e){return Object.prototype.toString.call(e).toLowerCase().match(/\s(\S+?)\]/)[1]}function m(e,t){for(var n,r=[];n=t.exec(e);)r.push([].slice.call(n));return r}e.VNode=y,e.h=function e(t,n,r){var o,a,i,c,u,l,f=v(n),d=v(r);"object"===f?(o=n,"array"===d?i=r:"string"===d&&(a=r)):"array"===f?i=n:"string"===f&&(a=n),t&&null!=a&&(i=[e("",a)],a=void 0),t.length&&(o=o||{},(c=t.match(/#([^#\.\[\]]+)/))&&(o.props=o.props||{},o.props.id=c[1]),(u=m(t,/\.([^#\.\[\]]+)/g).map(function(e){return e[1]})).length&&(o.attrs=o.attrs||{},o.attrs.class&&u.push.apply(u,h(o.attrs.class.split(" ").filter(function(e){return e&&e.length}))),o.attrs.class=u.join(" ")),(l=m(t,/\[(\S+?)=(\S+?)\]/g)).length&&(o.attrs=o.attrs||{},l.forEach(function(e){o.attrs[e[1]]=e[2]})),t=t.replace(/(#|\.|\[)\S*/g,"").toLowerCase().trim());var s=new y(t,o,i,a);return"svg"===s.type&&function e(t){t.type&&(t.data.ns="http://www.w3.org/2000/svg",t.children&&t.children.length&&t.children.forEach(e))}(s),s},e.patch=s,Object.defineProperty(e,"__esModule",{value:!0})});
